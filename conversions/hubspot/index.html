<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us</title>
  </head>
  <body>
    <h1>Contact us</h1>
    <!-- Load HubSpot forms library -->
    <script src="https://js.hsforms.net/forms/embed/47839131.js" defer></script>

    <!-- Load Dub analytics script -->
    <script
      src="https://www.dubcdn.com/analytics/script.js"
      defer
      data-domains='{"refer":"acme.link"}'
    ></script>

    <div
      class="hs-form-frame"
      data-region="na1"
      data-form-id="07b7409d-cf6b-4d9f-9926-76d55b591e88"
      data-portal-id="47839131"
    ></div>

    <script>
      // Read cookie value
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);

        if (parts.length === 2) {
          return parts.pop().split(";").shift();
        }

        return null;
      }

      // Listen for the form ready event
      window.addEventListener("hs-form-event:on-ready", (event) => {
        const clickId = getCookie("dub_id");

        if (!clickId) {
          console.debug("clickId not found. Skipping lead tracking.");
          return;
        }

        // Add the clickId to the form
        // Note: Make sure you have a hidden field with connected property "dub_id"
        HubSpotFormsV4.getForms()[0].setFieldValue("0-1/dub_id", clickId);
      });
    </script>
  </body>
</html>
